# redis-review
[Review](https://scatteredream.github.io/2024/10/12/%E9%BB%91%E9%A9%AC%E7%82%B9%E8%AF%84/)
[Optimization](https://scatteredream.github.io/2024/10/20/%E9%BB%91%E9%A9%AC%E7%82%B9%E8%AF%84%E4%BC%98%E5%8C%96/)
- 使用 **Redis** 实现 **Token** 登录验证，使用 **ThreadLocal** 储存用户登录信息，使用**双重拦截器**确保用户登录状态。
- 使用 **Redis** 作为商户信息缓存，避免大量请求直接打到数据库引发宕机，采取主动更新、旁路缓存的方法保证数据库与 Redis 之间的**缓存一致性**问题。使用**布隆过滤器**解决商户信息的**缓存穿透**问题，使用 **Redis 集群**等方式减小**缓存雪崩**的概率，使用**逻辑过期**的方式解**决缓存击穿**。
- 使用**乐观锁**避免秒杀券超卖，同时提高并发。使用 Lua 脚本解决秒杀券更新的**原子性**问题。使用 Redisson **分布式锁**解决集群环境下一人一单可能导致的并发安全问题。通过控制事务的粒度以及**动态代理**保证事务的有效性。在 3000 并发测试中成功拦截 100% 的重复请求。
- 利用 **RabbitMQ** 实现异步秒杀，监听器线程拿到消息后对数据库进行**异步扣减**操作。生产者开启 Confirm 模式、**消息持久化**，消费者**手动 ACK**，网络抖动或服务重启时，消息持久化在 Broker，处理成功后删除，避免丢失。捕获数据库异常，拒绝消息并重新入队，失败重试一定次数触发熔断，延迟队列中的死信到期自动路由回主队列。
- 使用 **ZSet** 与 **MySQL** 的自定义排序实现点赞及排行榜，使用 **Set** 作为共同关注的解决方案。
- 实现了基于**推模式**的关注内容推送，用基于时间戳的**分页查询**实现时间线功能。
